\section{Related work}
It is notoriously challenging to construct general models for human movement due to the complex interplay of planning and optimization processes at work, and it is often necessary to develop ad hoc solutions. Our work relates most closely to path following as in MOTIONMATCHINGREF, \citep{holden.16} or \citep{startke20} where movement is specified explicitly by the user and tracked by the animation synthesizer which is constructed from a set of reference animations. Such systems typically allow a discrepancy between the control signal and the path traced out by the generated animations or avoid the issue by adding more reference data for better coverage. Our method address this discrepancy as a pre-pass where a suitable movement model is found and reference animations are aligned, before being passed on to a secondary system.  

A further motivation for our work is seen in the division between gameplay and animation layers described by \citep{holden18} and reflected in state of the art industry tools such as Unreal Engine and Unity. Both expose animation systems with the ability to toggle root motion for animation clips. In our experience root motion is primarily used for static content such as cinematics, while dynamic gameplay relies on custom logic to provide changes in character position. 

We also relate our method to other research areas where high level controls are translated or used directly to drive an animation synthesizer. 

To our knowledge no work has been published with synchronization between model and reference animations by adjustment of both components.
\subsection{User input attractor}
In the game industry character movement controllers typically transition from a starting state towards the direction supplied by the user using an assortment of smoothing techniques such as lerp, exponential decay or damped springs applied to positions, velocities or accelerations as seen in \citep{buttner20} and \citep{holden21}. 
In research a similar approach is in \citep{mccann07}, \citep{holden.16}, \citep{Zhang18}. Additionally \citep{startke20} projects smooth user input to a lower level control space similar to trajectories found in reference animations. This illustrates the discrepancy between weak control signals and synthesized motion which is common to these methods, and addressed by exposing a parameter to control divergence of synthesized motion from the control signal (responsiveness) versus accepting visual artifacts (realism) MOTION MTACHJING SLIDER REF. 

It is a complex task to design expressive controllers using smooth input attraction. As a generalization research prefers simple models with complexity relayed to the animation synthesizer, while industry need a stronger correspondence and construct elaborate models using multiple springs intricately connected by state machines. Our method proposes to replace this tedious and difficult work through automation. 

A variant of user input attraction is found in \citep{treuille07} where an offline system tracks a path drawn by the user. In this case we have no movement model as the user input is exactly the low level control signal. Oppositely \citep{kovar02} use reward functions to provide less constrained control when the user specifies goals such has 'end position' that have no path requirements, and in \citep{lee18} 'straightness' and other stylistic traits contribute to similar rewards. In these cases the movement model is embedded in the animation synthesizes, but could be separated by augmenting the reward functions. Since high level tasks are used to allow the synthesizer some freedom, the specification is most often kept simple. A hybrid approach in \citep{lee10} track a control direction from the user with no explicit path but with a short horizon tending toward a path specification.

\subsection{Motion planning and control theory}
When a closed dynamical system exposes control input it is necessary to analyze how specific movements can be achieved using the available commands. Motion planning explores manipulation of mechanical systems like robots, while control theory examine systems of differential equations. In both cases the task is to extract discrete control signals that would makes a closed system follow a reference motion. This is inverse to the analysis of movement models, where we seek to replicate a closed system by examining relationships between fixed control signals (control genomes) and movement extracted from reference animations. 

\subsection{Function approximation}
Similar to \citep{startke20} it is possible to augment a basic input attractor with a secondary filter to capture additional details in reference animations. Dynamical movement primitives activate radial basis functions with a secondary scale function to capture such details while remaining robust to changes in timing. This method could replace our movement model, but requires an increasing amount of basis functions to capture finer details. This makes the model difficult to inspect and expensive to evaluate. Furthermore our approach manages complexity in a dual approach by combining movement models that are more expressive than simple point attractors, with alignments that remove unnecessary complexity from the reference animations. This retains the correctness of the end-to-end solution, but eliminates the need to capture fine grained details in the movement model.



